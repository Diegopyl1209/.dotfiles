#!/bin/bash

# Función para mostrar una notificación usando notify-send
show_notification() {
    local message="$1"
    local notification_id="string:x-canonical-private-synchronous:volume_control"

    notify-send -h "$notification_id" "Control de Volumen" "$message"
}

# Obtener el volumen actual usando pamixer
get_volume() {
    local volume=$(pamixer --get-volume)
    echo "$volume"
}

# Subir el volumen usando pamixer
increase_volume() {
    pamixer --increase 5
}

# Bajar el volumen usando pamixer
decrease_volume() {
    pamixer --decrease 5
}

# Comando para mostrar el volumen actual
show_volume() {
    local volume=$(get_volume)
    show_notification "Volumen actual: $volume%"
}

# Comprobar si pamixer está instalado en el sistema
if ! command -v pamixer &> /dev/null; then
    echo "Error: pamixer no está instalado. Por favor, instala pamixer para usar este script."
    exit 1
fi

# Comprobar si notify-send está instalado en el sistema
if ! command -v notify-send &> /dev/null; then
    echo "Error: notify-send no está instalado. Por favor, instala notify-send para usar este script."
    exit 1
fi

# Comprobar la cantidad de argumentos pasados al script
if [[ $# -ne 1 ]]; then
    echo "Uso: $0 [subir|bajar|mostrar]"
    exit 1
fi

# Obtener el primer argumento
action=$1

# Realizar la acción correspondiente
case "$action" in
    "subir")
        increase_volume
        show_volume
        ;;
    "bajar")
        decrease_volume
        show_volume
        ;;
    "mostrar")
        show_volume
        ;;
    *)
        echo "Acción no válida. Uso: $0 [subir|bajar|mostrar]"
        exit 1
        ;;
esac

exit 0
